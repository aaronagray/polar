fs = require('fs')
view = require('./View').View

var polarCtrl = {

  // Check to see if a custom controller has been made.
  // Use the custom controller or the defaults provided by Polar.
  find: function(route, req, res) {

    var ctrlPath = '../../app/ctrl/' + route.ctrlName + 'Controller',
        ctrl = require('../../app/ctrl/' + route.ctrlName + 'Controller').ctrl

    if(ctrl) {

      console.log('PolarCtrl: Using custom controller from ' + ctrlPath)

      ctrl[route.ctrlAction](req, res);

    } else {

      console.log('PolarCtrl: Using default controller for ' + route.ctrlName)

      polarCtrl.default(route.ctrlName, route.ctrlAction, res)

    }

  },

  // The default is to render a view with the same name as the action,
  // found within a folder named after the controller.
  default: function(ctrl, action, res) {

    view.render(ctrl, action, res)

  }

}

exports.ctrl = polarCtrl
